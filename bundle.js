(()=>{"use strict";var t={208:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(314),o=n.n(r)()(!1);o.push([t.id,'html, body{\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\theight: 100%;\r\n}\r\n\r\nh1, h2, h3{\r\n\tmargin: 0;\r\n}\r\n\r\nbody{\r\n\tdisplay: grid;\r\n\tgrid-template: min-content auto / max-content auto;\r\n}\r\n\r\nbody > *{\r\n\tpadding:8px;\r\n}\r\n\r\n#header{\r\n\tgrid-column: 1 / -1;\r\n\tborder-bottom:1px solid black;\r\n}\r\n\r\nform {\r\n\tdisplay: grid;\r\n\tgrid-template-columns: auto auto;\r\n\theight: min-content;\r\n\tgap: 0.5rem;\r\n\talign-items: center;\r\n}\r\n\r\nform h2{\r\n\tgrid-column: 1 / -1;\r\n}\r\n\r\nform input{\r\n\theight: min-content;\r\n}\r\n\r\nform input[type="submit"]{\r\n\tgrid-column: 2;\r\n\tjustify-self: end;\r\n}\r\n\r\n#taskList{\r\n\tborder-left: 1px solid black;\r\n\tflex: 1;\r\n\tmargin: 0;\r\n\tlist-style-type: none;\r\n\tbackground-color: #dadada;\r\n\toverflow: auto;\r\n\tpadding-right: 16px;\r\n\tscrollbar-width: thin;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\talign-content: baseline;\r\n\tgap: 1rem;\r\n}\r\n\r\n\r\nli {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tbackground-color: white;\r\n\tpadding: 8px;\r\n\tbox-shadow: 0 2px 5px gray;\r\n\twidth: 200px;\r\n\theight: min-content;\r\n}\r\n\r\n.demo{\r\n\tcolor: gray;\r\n}\r\n\r\n.title{\r\n\tfont-weight: bold;\r\n}\r\n\r\n.description{\r\n\tfont-style: italic;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n\theight: 1rem;\r\n}\r\n\r\n.buttonPanel{\r\n\twidth: 100%;\r\n\tmargin-top: 8px;\r\n\ttext-align: right;\r\n}\r\n\r\n.buttonPanel button{\r\n\tpadding: 2px 6px;\r\n}\r\n\r\n.buttonPanel button + button{\r\n\tmargin-left: 3px;\r\n}\r\n\r\ndialog{\r\n\tpadding: revert;\r\n}\r\n\r\n#projectMenu select{\r\n\twidth: 100%;\r\n}\r\n\r\n.high {\r\n\tbackground-color: #ffff99;\r\n}\r\n\r\n.highest {\r\n\tbackground-color: #ff9999;\r\n}\r\n\r\n.completed {\r\n\tcolor: #808080;\r\n\tbackground-color: #f4f4f4;\r\n}\r\n\r\n.completed .title {\r\n\ttext-decoration-line: line-through;\r\n}\r\n\r\n',""]);const a=o},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r,o,a=t[1]||"",i=t[3];if(!i)return a;if(e&&"function"==typeof btoa){var s=(n=i,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(o," */")),c=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[a].concat(c).concat([s]).join("\n")}return[a].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var a={},i=[],s=0;s<t.length;s++){var c=t[s],d=r.base?c[0]+r.base:c[0],l=a[d]||0,u="".concat(d," ").concat(l);a[d]=l+1;var p=n(u),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(f);else{var m=o(f,r);r.byIndex=s,e.splice(s,0,{identifier:u,updater:m,references:1})}i.push(u)}return i}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var a=r(t=t||[],o=o||{});return function(t){t=t||[];for(var i=0;i<a.length;i++){var s=n(a[i]);e[s].references--}for(var c=r(t,o),d=0;d<a.length;d++){var l=n(a[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}a=c}}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={id:r,exports:{}};return t[r](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{var t=n(72),e=n.n(t),r=n(825),o=n.n(r),a=n(659),i=n.n(a),s=n(56),c=n.n(s),d=n(540),l=n.n(d),u=n(113),p=n.n(u),f=n(208),m={};m.styleTagTransform=p(),m.setAttributes=c(),m.insert=i().bind(null,"head"),m.domAPI=o(),m.insertStyleElement=l(),e()(f.A,m),f.A&&f.A.locals&&f.A.locals;var h,v=function(t,e,n,r,o){this.title=t,this.description=e,this.dueDate=n,this.priority=r,this.project=o,this.completed=!1};!function(t){t[t.Normal=1]="Normal",t[t.High=2]="High",t[t.Highest=3]="Highest"}(h||(h={}));var g=function(){function t(){this.tasks=new Map}return t.prototype.getTask=function(t){return this.tasks.get(t)},t.prototype.getTasks=function(t){return Array.from(this.tasks.values()).filter((function(e){return e.project===t}))},t.prototype.addTask=function(t){var e=this.getNextId();t.id=e,this.tasks.set(e,t)},t.prototype.updateTask=function(t,e){this.tasks.set(t,e)},t.prototype.deleteTask=function(t){this.tasks.delete(t)},t.prototype.completeTask=function(t){this.tasks.get(t).completed=!this.tasks.get(t).completed},t.prototype.getNextId=function(){for(var t=1,e=Array.from(this.tasks.keys());e.includes(t);)t+=1;return t},t.prototype.stringify=function(){var t=Array.from(this.tasks.values());return JSON.stringify(t)},t.prototype.rebuildFromJson=function(t){var e=this;JSON.parse(t).forEach((function(t){t.dueDate=new Date(t.dueDate),e.updateTask(t.id,t)}))},t.prototype.getAllProjectNames=function(){return new Set(Array.from(this.tasks.values()).map((function(t){return t.project})))},t}(),y=function(){function t(t){var e=this,n=document.getElementById("taskList");null!=n&&(this.taskList=n);var r=document.querySelectorAll('select[id$="PrioritySelect"');this.prioritySelects=r;var o=document.getElementById("projectSelect");null!=o&&(this.projectSelect=o),this.projectNames=new Set,this.projectNames.add("Default"),this.selectedProject="Default",t.getAllProjectNames().forEach((function(t){return e.projectNames.add(t)}))}return t.prototype.buildPriorityOptions=function(){this.prioritySelects.forEach((function(t){Object.values(h).filter((function(t){return"number"==typeof t})).forEach((function(e){var n=document.createElement("option");n.text=h[e],n.value=e.toString(),t.appendChild(n)}))}))},t.prototype.renderList=function(e){var n=this;this.taskList.innerHTML="",e.sort((function(t,e){return function(t,e){return t.completed===e.completed?0:t.completed?1:-1}(t,e)||function(t,e){return t.dueDate.getTime()===e.dueDate.getTime()?0:t.dueDate>e.dueDate?1:-1}(t,e)||function(t,e){return t.priority===e.priority?0:t.priority>e.priority?-1:1}(t,e)})).forEach((function(e){var r=t.createTaskElement(e);n.taskList.appendChild(r)}))},t.createTaskElement=function(t){var e=document.createElement("li"),n=document.createElement("span");n.textContent=t.title,n.classList.add("title"),e.appendChild(n);var r=document.createElement("span");r.textContent=t.description,r.classList.add("description"),e.appendChild(r);var o=document.createElement("span");o.textContent="Due date: ".concat(t.dueDate.getUTCMonth()+1,"/").concat(t.dueDate.getUTCDate(),"/").concat(t.dueDate.getUTCFullYear()),e.appendChild(o);var a=document.createElement("span");a.textContent="Priority: "+h[t.priority],e.appendChild(a);var i=document.createElement("div");i.classList.add("buttonPanel");var s=document.createElement("button");s.textContent="✔",s.addEventListener("click",(function(){dispatchEvent(new CustomEvent("taskComplete",{detail:t.id}))})),i.appendChild(s);var c=document.createElement("button");c.textContent="✏";var d=function(){dispatchEvent(new CustomEvent("taskEdit",{detail:{task:t}}))};c.addEventListener("click",d),i.appendChild(c);var l=document.createElement("button");return l.textContent="✖",l.addEventListener("click",(function(){dispatchEvent(new CustomEvent("taskDelete",{detail:t.id}))})),i.appendChild(l),e.appendChild(i),t.completed&&e.classList.add("completed"),e.addEventListener("dblclick",d),t.priority===h.High?e.classList.add("high"):t.priority===h.Highest&&e.classList.add("highest"),e},t.prototype.refreshProjectOptions=function(){var t=this;this.projectSelect.innerHTML="",this.projectNames.forEach((function(e){var n=document.createElement("option");n.value=e,n.textContent=e,e===t.selectedProject&&(n.selected=!0),t.projectSelect.appendChild(n)}))},t.prototype.addProject=function(t){this.projectNames.add(t),this.refreshProjectOptions()},t.prototype.setSelectedProject=function(t){this.selectedProject=t},t}();const k=y;var b=new g;localStorage.getItem("taskList")&&b.rebuildFromJson(localStorage.getItem("taskList"));var E=document.getElementById("taskEditDialog"),x=document.getElementById("editTitle"),j=document.getElementById("editDescription"),T=document.getElementById("editDueDate"),C=document.getElementById("editPrioritySelect"),I=document.getElementById("editId"),L=document.getElementById("entryTitle"),w=document.getElementById("entryDescription"),S=document.getElementById("entryDueDate"),D=document.getElementById("entryPrioritySelect"),P=document.getElementById("projectSelect"),N=document.getElementById("addProjectDialog"),A=document.getElementById("openAddProject"),B=document.getElementById("addProjectName"),M=new k(b);function O(){localStorage.setItem("taskList",b.stringify())}M.buildPriorityOptions(),M.refreshProjectOptions(),M.renderList(b.getTasks(P.value)),A.onclick=function(){N.showModal()},addEventListener("submit",(function(t){if(t.preventDefault(),t.target instanceof Element)if("entryForm"===t.target.id){if(Array.from(document.querySelectorAll("#entryForm *[id]")).every((function(t){return""!=t.nodeValue}))){var e=new v(L.value,w.value,new Date(S.value),Number.parseInt(D.value),P.value);b.addTask(e),O(),M.renderList(b.getTasks(P.value)),L.focus(),L.select()}}else if("editForm"===t.target.id){var n=b.getTask(Number.parseInt(I.value));n.title=x.value,n.description=j.value,n.dueDate=new Date(T.value),n.priority=Number.parseInt(C.value),b.updateTask(Number.parseInt(I.value),n),O(),M.renderList(b.getTasks(P.value)),E.close()}else"addProjectForm"===t.target.id&&(M.addProject(B.value),M.refreshProjectOptions(),N.close())})),addEventListener("taskDelete",(function(t){b.deleteTask(parseInt(t.detail)),O(),M.renderList(b.getTasks(P.value))})),addEventListener("taskEdit",(function(t){I.value=t.detail.task.id,x.value=t.detail.task.title,j.value=t.detail.task.description,T.value=t.detail.task.dueDate.toISOString().substring(0,10),C.value=t.detail.task.priority,E.showModal()})),addEventListener("taskComplete",(function(t){b.completeTask(parseInt(t.detail)),O(),M.renderList(b.getTasks(P.value))})),P.onchange=function(){M.setSelectedProject(P.value),M.renderList(b.getTasks(P.value))}})()})();